# å¯µç‰©å¥åº·å°å¹«æ‰‹ - é–‹ç™¼æŒ‡å¼•

## ğŸ“‹ ç›®å‰é€²åº¦ç¸½è¦½

âœ… **å·²å®Œæˆ**ï¼š

1. **health-report.html** - ä¸»é é¢èˆ‡è¡¨å–®ï¼ˆè¶£å‘³å°å·¥å…·å®šä½ã€å…è²¬è²æ˜ã€ç‹—ç‹—é«”å‹èªªæ˜èˆ‡å“ç¨®ç¯„ä¾‹ã€æ€§åˆ¥ã€çµç´®é¸é …ã€å¥åº·ç‹€æ³å¤šé¸å«ã€Œæ²’æœ‰ä»»ä½•ç‹€æ³ã€ã€å ±å‘ŠåŒ…å«å“ªäº›å…§å®¹å·¦å°é½Šï¼‰
2. **health-guidelines.json** - å¥åº·æŒ‡å¼•è³‡æ–™åº«ï¼ˆç‰©ç¨®å¸¸è¦‹ç–¾ç—…ã€æ€§åˆ¥ï¼çµç´®å¥åº·é—œæ³¨ã€æ€§åˆ¥ç†±é‡ä¿‚æ•¸ã€é«”å‹æ„›å¿ƒèˆ‡é£¼ä¸»ç¨±è®šï¼‰
3. **health-calculator.js** - æ ¸å¿ƒè¨ˆç®—é‚è¼¯ï¼ˆRER/MER å«æ€§åˆ¥ä¿‚æ•¸ã€å¸¸è¦‹ç–¾ç—…å»ºè­°ã€æ€§åˆ¥ï¼çµç´®å¥åº·é—œæ³¨ç´å…¥å¥åº·æé†’ç¬¬ä¸€æ¢ï¼‰
4. **health-report-generator.js** - Canvas åœ–ç‰‡ç”Ÿæˆå™¨ï¼ˆ1080Ã—1440 ç›´å¼ 3:4ï¼›åƒè€ƒ HTML ç‰ˆç‰ˆé¢ï¼šæ©˜è‰²æ¼¸å±¤æ¨™é¡Œåˆ—ï¼‹å³å´å¯µç‰©å¡ã€å…©å¼µç¨ç«‹å¹´é½¡ï¼éšæ®µå¡èˆ‡æ•¸å­—çªå‡ºã€é«”å‹èˆ‡æ´»å‹•å·¦å³å…©æ¬„ã€é£²é£Ÿä¸‰å¼µå°å¡æ©«æ’ï¼‹ç…§è­·æ¡†ã€å¥åº·æé†’å·¦å´æ©˜é‚Šæ¢ã€æ·±è‰²é å°¾ï¼‹ç™½å­—ï¼‹QRï¼›é«”å‹ 5 ç´šæ„›å¿ƒã€é£²é£Ÿå€é–“èˆ‡ç–¾ç—…æé†’ã€QR é€£çµå®˜ç¶²ï¼‰
5. **health-report-ui.js** - è¡¨å–®äº’å‹•æ§åˆ¶ï¼ˆå€‰é¼ é«”é‡å…¬å…‹ã€ç‹—ç‹—ï¼å€‰é¼ å°ˆç”¨å€å¡Šã€çµç´®é¸é …åƒ…è²“ç‹—å…”é¡¯ç¤ºã€å¥åº·ç‹€æ³å‹•æ…‹è¼‰å…¥ï¼‹ã€Œæ²’æœ‰ä»»ä½•ç‹€æ³ã€äº’æ–¥ï¼‰

ğŸ‰ **é–‹ç™¼å®Œæˆ**ï¼šæ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å…¨æ•¸å¯¦ä½œã€‚å®œåŠ ç‚ºå¯µç‰©é£¼æ–™ç”¨å“é€£é–å°ˆè³£ï¼Œæœ¬å·¥å…·ç‚ºè¶£å‘³å°å·¥å…·ï¼Œä¸èƒ½å–ä»£å°ˆæ¥­ç¸é†«ã€‚

---

## ğŸ¨ æª”æ¡ˆ 1ï¼šhealth-report-generator.js

### åŠŸèƒ½è·è²¬

è² è²¬å°‡è¨ˆç®—çµæœç¹ªè£½æˆ **1080Ã—1440**ï¼ˆç›´å¼ 3:4ï¼‰çš„ PNG åœ–ç‰‡ï¼Œä½¿ç”¨ç´” Canvas API å®Œæˆæ‰€æœ‰ç¹ªåœ–ï¼Œé©åˆç¤¾ç¾¤åˆ†äº«ã€‚

### æ ¸å¿ƒé¡åˆ¥è¨­è¨ˆ

```javascript
class PetHealthReportGenerator {
    constructor(reportData) {
        this.data = reportData;  // ä¾†è‡ª healthCalculator.generateHealthReport()
        this.canvas = document.getElementById('reportCanvas') || document.createElement('canvas');
        this.ctx = this.canvas.getContext('2d');
        this.canvas.width = 1080;
        this.canvas.height = 1080 * (4 / 3);  // 1440ï¼Œç›´å¼ 3:4
    }
}
```

### å¿…é ˆå¯¦ä½œçš„æ–¹æ³•

#### 1. ä¸»è¦ç”Ÿæˆæµç¨‹

```javascript
async generate() {
    await this.loadAssets();         // è¼‰å…¥å­—é«”ã€Logo
    this.drawBackground();           // ç¹ªè£½æ¼¸å±¤èƒŒæ™¯
    this.drawHeader();               // æ©˜è‰²æ¼¸å±¤æ¨™é¡Œåˆ— + å³å´å¯µç‰©å¡ï¼ˆé ­åƒã€åå­—ã€æ€§åˆ¥ãƒ»æ—¥æœŸï¼‰
    this.drawAgeAndStageRow(currentY);   // å…©å¼µç¨ç«‹å¡ï¼šäººé¡å¹´é½¡ï¼ˆæ•¸å­—çªå‡ºï¼‰+ ç”Ÿå‘½éšæ®µï¼ˆé«˜äº®æ¡†å¥æª¢å»ºè­°ï¼‰
    this.drawBodyConditionBlock(currentY); // é«”å‹èˆ‡æ´»å‹•ï¼šæ¨™é¡Œ + å·¦å³å…©æ¬„ï¼ˆé«”å‹åƒè€ƒï½œé‹å‹•é‡ï¼‰
    this.drawNutritionBlock(currentY);     // é£²é£Ÿå»ºè­°ï¼šä¸‰å¼µå°å¡æ©«æ’ + ç…§è­·æé†’æ¡†
    this.drawHealthTipsBlock(currentY);    // å¥åº·æé†’ï¼šæ¯æ¢å·¦å´æ©˜é‚Šæ¢ã€è‡ªå‹•æ›è¡Œ
    await this.drawFooter(currentY);       // æ·±è‰²é å°¾ + é–€å¸‚è³‡è¨Š + QR + å…è²¬è²æ˜
    return this.canvas;
}
```

#### 2. è¼”åŠ©ç¹ªåœ–æ–¹æ³•

```javascript
// ç¹ªè£½åœ“è§’çŸ©å½¢å¡ç‰‡
drawRoundedCard(x, y, width, height, radius, fillColor) {
    this.ctx.fillStyle = fillColor;
    this.ctx.beginPath();
    this.ctx.roundRect(x, y, width, height, radius);
    this.ctx.fill();
}

// ç¹ªè£½å¸¶é™°å½±çš„æ–‡å­—
drawTextWithShadow(text, x, y, fontSize, color) {
    this.ctx.shadowColor = 'rgba(0,0,0,0.1)';
    this.ctx.shadowBlur = 4;
    this.ctx.font = `${fontSize}px "Noto Sans TC"`;
    this.ctx.fillStyle = color;
    this.ctx.fillText(text, x, y);
    this.ctx.shadowColor = 'transparent';
}

// ä¸­æ–‡è‡ªå‹•æ›è¡Œï¼ˆé‡è¦ï¼ï¼‰
drawMultilineText(text, x, y, maxWidth, lineHeight) {
    const chars = text.split('');
    let line = '';
    let currentY = y;
    
    for (let char of chars) {
        const testLine = line + char;
        const metrics = this.ctx.measureText(testLine);
        
        if (metrics.width > maxWidth && line !== '') {
            this.ctx.fillText(line, x, currentY);
            line = char;
            currentY += lineHeight;
        } else {
            line = testLine;
        }
    }
    this.ctx.fillText(line, x, currentY);
}
```

#### 3. è³‡ç”¢è¼‰å…¥

```javascript
async loadAssets() {
    // ç­‰å¾…å­—é«”è¼‰å…¥
    await document.fonts.ready;
    
    // è¼‰å…¥ Logo
    this.logo = await this.loadImage('assets/images/yichai-petshop-logo.png');
}

loadImage(src) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.onload = () => resolve(img);
        img.onerror = reject;
        img.src = src;
    });
}
```

#### 4. QR Code æ•´åˆ

- **é€£çµ**ï¼šå ±å‘Šå…§ QR Code é€£çµè‡³å®˜ç¶²é¦–é  `https://yichai-tw.github.io/`ï¼ˆå®˜ç¶²ã€é–€å¸‚èˆ‡æ›´å¤šå¥åº·è³‡è¨Šï¼‰ï¼Œéå¥åº·å°å¹«æ‰‹é é¢ã€‚
- ä½¿ç”¨ QRCode å¥—ä»¶ç”Ÿæˆå¾Œç¹ªè£½è‡³ Canvasï¼Œå®Œæˆå¾Œç§»é™¤æš«å­˜ç¯€é»ã€‚

#### 5. åŒ¯å‡ºåŠŸèƒ½

```javascript
async toBlob() {
    return new Promise((resolve) => {
        this.canvas.toBlob(resolve, 'image/png', 0.9);
    });
}

async toDataURL() {
    return this.canvas.toDataURL('image/png', 0.9);
}
```

### ç‰ˆé¢é…ç½®å»ºè­°ï¼ˆç›´å¼ 3:4ï¼Œ1080Ã—1440ï¼Œåƒè€ƒ HTML ç‰ˆï¼‰

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 0
â”‚ ğŸ¨ æ©˜è‰²æ¼¸å±¤æ¨™é¡Œåˆ— (#FF6B35â†’#FF8E53)  â”‚ é«˜åº¦ 200
â”‚ Logo + ä¸€éµæ¯›å­©å¥åº·å°å¹«æ‰‹ + æ—¥æœŸ     â”‚
â”‚ å³å´ï¼šå¯µç‰©å¡ï¼ˆé ­åƒ + åå­— + æ€§åˆ¥ãƒ»æ—¥æœŸï¼‰â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 228
â”‚ ğŸ“Š äººé¡å¹´é½¡å¡ï¼ˆå·¦ï¼‰â”‚ ğŸ“‹ ç”Ÿå‘½éšæ®µå¡ï¼ˆå³ï¼‰â”‚ å…©å¼µç¨ç«‹ç™½å¡ã€æ•¸å­—çªå‡ºã€å³å¡é«˜äº®æ¡†
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 416
â”‚ âš–ï¸ é«”å‹èˆ‡æ´»å‹•ï¼ˆæ¨™é¡Œ + å·¦æ¬„é«”å‹åƒè€ƒï½œå³æ¬„é‹å‹•é‡ï¼‰â”‚ é«˜åº¦ 240
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 674
â”‚ ğŸ² é£²é£Ÿå»ºè­°ï¼ˆä¸‰å¼µå°å¡æ©«æ’ kcal/ä¹¾ç³§/é£²æ°´ + ç…§è­·æé†’æ¡†ï¼‰â”‚ é«˜åº¦å‹•æ…‹ 200~280
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¥ å¥åº·æé†’ï¼ˆæ¯æ¢å·¦å´æ©˜é‚Šæ¢ã€æœ€å¤š 4 æ¢ã€è‡ªå‹•æ›è¡Œï¼‰â”‚ é«˜åº¦ 268
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ·±è‰²é å°¾ #2C3E50ï¼šé–€å¸‚è³‡è¨Šï¼ˆç™½å­—ï¼‰+ QR Code â”‚ é«˜åº¦ 140
â”‚ å…è²¬è²æ˜ï¼ˆè·ç•«å¸ƒåº• 40pxï¼‰            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1440
```

### è‰²å½©é…ç½®

- **èƒŒæ™¯æ¼¸å±¤**ï¼š`#FFF9F0` â†’ `#F0F8FF`
- **æ¨™é¡Œåˆ—æ¼¸å±¤**ï¼š`#FF6B35` â†’ `#FF8E53`ï¼ˆåƒè€ƒ HTML ç‰ˆï¼‰
- **é å°¾æ·±è‰²**ï¼š`#2C3E50`ï¼ˆé–€å¸‚å€å¡Šã€ç™½å­—ï¼‰
- **å¡ç‰‡åº•è‰²**ï¼š`#FFFFFF`ã€æ·ºæš–è‰²ï¼ˆé«”å‹ï¼æ´»å‹•å°å¡ï¼‰
- **å“ç‰Œæ©™è‰²**ï¼š`#DF7621`ï¼ˆæ¨™é¡Œã€é‡é»ã€å·¦å´é‚Šæ¢ï¼‰
- **æ·±ç°æ–‡å­—**ï¼š`#2C3E50`ï¼ˆèˆ‡ç¶²é ä¸€è‡´ï¼‰
- **æ·ºç°æ–‡å­—**ï¼š`#64748B`

---

## ğŸ® æª”æ¡ˆ 2ï¼šhealth-report-ui.js

### æª”æ¡ˆ 2 åŠŸèƒ½è·è²¬

è² è²¬è¡¨å–®äº’å‹•ã€æ­¥é©Ÿåˆ‡æ›ã€è³‡æ–™é©—è­‰ã€å ±å‘Šç”Ÿæˆè§¸ç™¼ã€‚

### æ ¸å¿ƒåŠŸèƒ½å¯¦ä½œ

#### 1. å…¨åŸŸè®Šæ•¸

```javascript
let currentStep = 1;
let generatedReport = null;
```

```javascript
function selectPetType(petType) {
    selectedPetType = petType;
    
    });
    document.querySelector(`[data-pet-type="${petType}"]`).classList.add('selected');
    
    // æ›´æ–°é«”é‡æç¤º
    updateWeightHint(petType);
    
        weightUnitSelect.value = petType === 'hamster' ? 'g' : 'kg';
    // é¡¯ç¤º/éš±è—ç‹—ç‹—é«”å‹ã€å€‰é¼ å“ç¨®é¸é …
    document.getElementById('hamsterBreedSection').style.display = 
    // é¡¯ç¤º/éš±è—çµç´®é¸é …ï¼ˆå€‰é¼ ä¸€èˆ¬ä¸çµç´®ï¼Œä¸é¡¯ç¤ºï¼‰
    const neuteredSection = document.getElementById('neuteredSection');
    if (neuteredSection) {
        neuteredSection.style.display = petType === 'hamster' ? 'none' : 'block';
    }
    
    // è‡ªå‹•è·³è½‰åˆ°æ­¥é©Ÿ 2ï¼ˆå«ä¾ç‰©ç¨®å‹•æ…‹è¼‰å…¥å¥åº·ç‹€æ³é¸é …ï¼‰
    setTimeout(() => goToStep2(), 500);
}
```

#### 3. æ­¥é©Ÿåˆ‡æ›

```javascript
function goToStep2() {
    document.getElementById('step1').style.display = 'none';
    document.getElementById('step2').style.display = 'block';
    
    updateHealthConditionsList();  // ä¾é¸å–å¯µç‰©é¡å‹è¼‰å…¥å°æ‡‰å¸¸è¦‹ç–¾ç—…é¸é …ï¼ˆè²“/ç‹—/å…”/å€‰é¼ å„ä¸åŒï¼‰
    updateStepIndicator(2);
}

function backToStep1() {
    document.getElementById('step2').style.display = 'none';
    document.getElementById('step1').style.display = 'block';
    
    updateStepIndicator(1);
}

function updateStepIndicator(step) {
    for (let i = 1; i <= 3; i++) {
        const indicator = document.getElementById(`step${i}Indicator`);
        indicator.classList.remove('active', 'completed');
        
        if (i < step) {
            indicator.classList.add('completed');
        } else if (i === step) {
            indicator.classList.add('active');
        }
    }
}
```

#### 4. è¡¨å–®æäº¤è™•ç†

```javascript
document.getElementById('petDataForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // é©—è­‰å¿…å¡«æ¬„ä½
    if (!validateForm()) {
        return;
    }
    
    // æ”¶é›†è¡¨å–®è³‡æ–™
    const formData = collectFormData();
    
    // é¡¯ç¤ºè¼‰å…¥å‹•ç•«
    showLoading();
    
    try {
        // ç”Ÿæˆå ±å‘Šè³‡æ–™
        const reportData = healthCalculator.generateHealthReport(formData);
        
        // ç”Ÿæˆåœ–ç‰‡
        const generator = new PetHealthReportGenerator(reportData);
        await generator.generate();
        
        generatedReport = generator;
        
        // é¡¯ç¤ºå ±å‘Š
        showReport();
        
    } catch (error) {
        console.error('ç”Ÿæˆå ±å‘Šå¤±æ•—:', error);
        alert('å ±å‘Šç”Ÿæˆå¤±æ•—ï¼Œè«‹é‡è©¦');
    } finally {
        hideLoading();
    }
});
```

#### 5. è¡¨å–®é©—è­‰

```javascript
function validateForm() {
    const ageInputType = document.querySelector('input[name="ageInputType"]:checked').value;
    
    if (ageInputType === 'birthdate') {
        const birthdate = document.getElementById('birthdate').value;
        if (!birthdate) {
            alert('è«‹é¸æ“‡å‡ºç”Ÿæ—¥æœŸ');
            return false;
        }
    } else {
        const years = document.getElementById('ageYears').value;
        const months = document.getElementById('ageMonths').value;
        if (!years && !months) {
            alert('è«‹è¼¸å…¥å¹´é½¡');
            return false;
        }
    }
    
    // ç‹—ç‹—å¿…é ˆé¸æ“‡é«”å‹ã€å€‰é¼ å¿…é ˆé¸æ“‡å“ç¨®
    if (selectedPetType === 'dog') {
        const dogSize = document.querySelector('input[name="dogSize"]:checked');
        if (!dogSize) {
            alert('è«‹é¸æ“‡ç‹—ç‹—é«”å‹');
            return false;
        }
    }
    if (selectedPetType === 'hamster') {
        const hamsterBreed = document.querySelector('input[name="hamsterBreed"]:checked');
        if (!hamsterBreed) {
            alert('è«‹é¸æ“‡å€‰é¼ å“ç¨®');
            return false;
        }
    }
    
    return true;
}
```

#### 6. åˆ†äº«èˆ‡ä¸‹è¼‰

```javascript
async function shareReport() {
    const blob = await generatedReport.toBlob();
    const file = new File([blob], 'pet-health-report.png', { type: 'image/png' });
    
    if (navigator.share && navigator.canShare({ files: [file] })) {
        try {
            await navigator.share({
                title: 'æ¯›å­©å¥åº·å°å¹«æ‰‹',
                text: 'æˆ‘å‰›ç”Ÿæˆäº†å¯µç‰©çš„å¥åº·å ±å‘Šï¼',
                files: [file]
            });
        } catch (err) {
            downloadReport();
        }
    } else {
        downloadReport();
    }
}

async function downloadReport() {
    const blob = await generatedReport.toBlob();
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `å¯µç‰©å¥åº·å ±å‘Š_${new Date().toLocaleDateString()}.png`;
    a.click();
    URL.revokeObjectURL(url);
}

function resetForm() {
    location.reload();
}
```

### è¼”åŠ©åŠŸèƒ½

```javascript
// åˆ‡æ›å¹´é½¡è¼¸å…¥æ–¹å¼
function toggleAgeInput() {
    const type = document.querySelector('input[name="ageInputType"]:checked').value;
    document.getElementById('birthdateInput').style.display = 
        type === 'birthdate' ? 'block' : 'none';
    document.getElementById('ageInput').style.display = 
        type === 'age' ? 'block' : 'none';
}

// æ›´æ–°é«”é‡æç¤º
function updateWeightHint(petType) {
    const hints = {
        cat: 'ä¸€èˆ¬æˆè²“ï¼š3-5 kg',
        dog: 'ä¾é«”å‹è€Œç•°ï¼š2-70 kg',
        rabbit: 'ä¸€èˆ¬æˆå…”ï¼š1.5-3.5 kg',
        hamster: 'å€‰é¼ ï¼š30-200 g'
    };
    document.getElementById('weightHint').textContent = hints[petType] || '';
}

// æ”¶é›†è¡¨å–®è³‡æ–™ï¼ˆå«æ€§åˆ¥ã€çµç´®ã€å¥åº·ç‹€æ³ï¼›å¥åº·ç‹€æ³éæ¿¾ã€Œæ²’æœ‰ä»»ä½•ç‹€æ³ã€ï¼‰
function collectFormData() {
    const ageInputType = document.querySelector('input[name="ageInputType"]:checked').value;
    const weight = parseFloat(document.getElementById('weight').value);
    const weightUnit = document.getElementById('weightUnit').value;
    const sex = document.querySelector('input[name="sex"]:checked')?.value || 'male';
    const healthConditionsRaw = Array.from(document.querySelectorAll('input[name="healthCondition"]:checked')).map(cb => cb.value);
    const healthConditions = healthConditionsRaw.filter(v => v && v !== 'health_condition_none');
    const neutered = document.querySelector('input[name="neutered"]:checked')?.value === 'yes';
    
    return {
        petType: selectedPetType,
        petName: document.getElementById('petName').value || null,
        birthdate: ageInputType === 'birthdate' ? 
            document.getElementById('birthdate').value : null,
        ageYears: ageInputType === 'age' ? 
            parseInt(document.getElementById('ageYears').value) || 0 : null,
        ageMonths: ageInputType === 'age' ? 
            parseInt(document.getElementById('ageMonths').value) || 0 : null,
        weight: weight ? (weightUnit === 'g' ? weight / 1000 : weight) : null,
        sex: sex,
        neutered: neutered,
        activityLevel: document.querySelector('input[name="activityLevel"]:checked')?.value || 'moderate',
        bodyShape: document.querySelector('input[name="bodyShape"]:checked')?.value || 'ideal',
        healthConditions: healthConditions,
        dogSize: selectedPetType === 'dog' ? 
            document.querySelector('input[name="dogSize"]:checked')?.value : null,
        hamsterBreed: selectedPetType === 'hamster' ?
            document.querySelector('input[name="hamsterBreed"]:checked')?.value : null
    };
}
```

---

## ğŸš€ æ•´åˆæ¸¬è©¦æª¢æŸ¥æ¸…å–®

å®Œæˆå¾Œè«‹ä¾åºæ¸¬è©¦ï¼š

1. âœ… é¸æ“‡å‹•ç‰©ç¨®é¡ â†’ è‡ªå‹•è·³è½‰æ­¥é©Ÿ 2
2. âœ… ç‹—ç‹—é¡¯ç¤ºé«”å‹é¸é …ï¼ˆå«æˆçŠ¬é«”å‹ï¼å“ç¨®èªªæ˜èˆ‡ç¯„ä¾‹ï¼‰ï¼Œå€‰é¼ é¡¯ç¤ºå“ç¨®é¸é …ï¼›é¸å€‰é¼ æ™‚é«”é‡å–®ä½é è¨­ç‚ºå…¬å…‹
3. âœ… æ€§åˆ¥é¸é …ï¼ˆå…¬ï¼æ¯ï¼‰ã€çµç´®é¸é …ï¼ˆè²“ç‹—å…”é¡¯ç¤ºã€å€‰é¼ ä¸é¡¯ç¤ºï¼‰ã€å¥åº·ç‹€æ³å¤šé¸ï¼ˆå«ã€Œæ²’æœ‰ä»»ä½•ç‹€æ³ã€ã€ä¾ç‰©ç¨®å‹•æ…‹è¼‰å…¥ï¼‰
4. âœ… åˆ‡æ›å¹´é½¡è¼¸å…¥æ–¹å¼ï¼ˆå‡ºç”Ÿæ—¥æœŸ/ç›´æ¥è¼¸å…¥ï¼‰
5. âœ… æäº¤è¡¨å–® â†’ é¡¯ç¤ºè¼‰å…¥å‹•ç•« â†’ ç”Ÿæˆå ±å‘Š
6. âœ… Canvas æ­£ç¢ºé¡¯ç¤ºï¼šæ©˜è‰²æ¼¸å±¤æ¨™é¡Œï¼‹å¯µç‰©å¡ã€å…©å¼µç¨ç«‹å¹´é½¡ï¼éšæ®µå¡ã€é«”å‹èˆ‡æ´»å‹•å·¦å³å…©æ¬„ã€é£²é£Ÿä¸‰å¼µå°å¡ï¼‹ç…§è­·æ¡†ã€å¥åº·æé†’å·¦å´æ©˜é‚Šæ¢ã€æ·±è‰²é å°¾ï¼›äººé¡å¹´é½¡ã€ç”Ÿå‘½éšæ®µã€é«”å‹ 5 ç´šæ„›å¿ƒã€é£²é£Ÿå€é–“ã€å¥åº·æé†’ï¼ˆæ€§åˆ¥ï¼çµç´®ï¼‹å‹¾é¸ç–¾ç—…ï¼‰ï¼›é å°¾ä¸é‡ç–Š
7. âœ… åˆ†äº«åŠŸèƒ½ï¼ˆæ‰‹æ©Ÿæ¸¬è©¦ Web Share APIï¼‰
8. âœ… ä¸‹è¼‰ PNG æª”æ¡ˆ
9. âœ… é‡æ–°æ¸¬è©¦æŒ‰éˆ•æ­£å¸¸é‹ä½œ

---

## ğŸ“Š è³‡æ–™åº«èˆ‡è¨ˆç®—é‚è¼¯ï¼ˆhealth-guidelines.json / health-calculator.jsï¼‰

### health-guidelines.json é‡é»çµæ§‹

- **common**ï¼š`activityLevelOptions`ã€`bodyShapeOptions`ã€`bodyShapeAdvice`ã€`bodyShapeLevel`ï¼ˆ1â€“5ï¼‰ã€`bodyShapePraise`ã€`sexOptions`ã€`sexMerModifier`ã€‚
- **sexHealthFocus**ï¼šä¾ç‰©ç¨®èˆ‡æ€§åˆ¥æä¾›å¥åº·é—œæ³¨ï¼ˆæœªçµç´®æ™‚ä½¿ç”¨ï¼Œå¦‚å…¬è²“æ³Œå°¿é“ã€æ¯ç‹—å­å®®è“„è†¿ç­‰ï¼‰ã€‚
- **neuteredFocus**ï¼šä¾ç‰©ç¨®æä¾›å·²çµç´®ï¼çµ•è‚²å¾Œçš„å»ºè­°ï¼ˆè²“ç‹—å…”ï¼›å€‰é¼ è¡¨å–®ä¸é¡¯ç¤ºçµç´®é¸é …ï¼‰ã€‚
- **å„ç‰©ç¨®**ï¼š**commonConditions**ï¼ˆç‰©ç¨®å°ˆå±¬å¸¸è¦‹ç–¾ç—…ï¼‰ã€**nutritionGuidelines**ï¼ˆRER/MERã€æ€§åˆ¥ä¿‚æ•¸ã€é£²æ°´èˆ‡ç†±é‡å€é–“ï¼‰ã€‚

### health-calculator.js é—œéµè¡Œç‚º

- **è¼‰å…¥**ï¼š`loadGuidelines()` ä½¿ç”¨ `_loadPromise` åƒ…è¼‰å…¥ä¸€æ¬¡ï¼Œé¿å… race conditionã€‚
- **ç‡Ÿé¤Š**ï¼š`calculateNutritionRanges()` ç¶œåˆå“ç¨®ã€å¹´é½¡ã€é«”é‡ã€é«”å‹ã€æ€§åˆ¥è¨ˆç®—ç†±é‡/ä¹¾ç³§/é£²æ°´å€é–“ã€‚
- **å¥åº·ç‹€æ³**ï¼š`getConditionAdvice(petType, conditionIds)` ä¾å‹¾é¸ç–¾ç—…å›å‚³é£²é£Ÿèˆ‡ç…§è­·å»ºè­°ã€‚
- **å¥åº·æé†’**ï¼šå ±å‘Šä¸­ `healthTips` é †åºç‚ºã€Œæ€§åˆ¥ï¼çµç´®å¥åº·é—œæ³¨ï¼ˆè‹¥æœ‰ï¼›å·²çµç´®ç”¨ neuteredFocusï¼Œæœªçµç´®ç”¨ sexHealthFocusï¼‰ã€â†’ å‹¾é¸ç–¾ç—…å»ºè­° â†’ ç”Ÿå‘½éšæ®µæé†’ã€‚

### è³‡æ–™å°é½Šï¼ˆJSON â†” CSVï¼‰èˆ‡å…¶ä»–ç‰©ç¨®

- **scripts/convert_health_data.py**ï¼šå¾ `data/health-guidelines.json` åŒ¯å‡º `docs/health_life_stages.csv`ã€`docs/health_conditions.csv`ã€`docs/pet_breeds.csv`ï¼ˆåŸå…ˆçš„ `hamster_breeds.csv` å·²çµ±ä¸€ç‚º `pet_breeds.csv`ï¼‰ï¼›å¦å¤–åœ¨è½‰æ›æµç¨‹ä¸­æœƒç”¢ç”Ÿ per-species JSON èˆ‡å£“ç¸®ç”¨é€”çš„æª”æ¡ˆï¼ŒåŒ…æ‹¬ `data/guidelines_cat.json`ã€`data/guidelines_dog.json`ã€`data/guidelines_rabbit.json`ã€`data/guidelines_hamster.json` ä»¥åŠ `data/breeds_lifespans.json`ï¼Œä»¥åˆ©å‰ç«¯å°å·¥å…·æŒ‰ç‰©ç¨®åˆ†åˆ¥è¼‰å…¥ã€‚
- `--import-csv` è·¯å¾‘ï¼šåŒ¯å› JSON æ™‚æœƒå„ªå…ˆè®€å– `docs/pet_breeds.csv`ï¼Œç•¶ä¸­åŒ…å«å„ç‰©ç¨®å“ç¨®èˆ‡é æœŸå£½å‘½ï¼Œä¸¦åˆä½µåˆ°å°æ‡‰ species çš„è³‡æ–™çµæ§‹ï¼›è‹¥ CSV ä¸­ç¼ºå°‘è³‡æ–™ï¼Œç”¢ç”Ÿå™¨æœƒå˜—è©¦å¾ç¾æœ‰ `data/` JSON æ“·å–å›å¡«ã€‚

- **pet_breeds.csv** çµæ§‹å»ºè­°ï¼š`ç‰©ç¨®`ã€`å“ç¨®key`ï¼ˆå¯ä½œç‚º JSON å°é½Š keyï¼‰ã€`å“ç¨®æ¨™ç±¤`ã€`å­¸å`ã€`ä¿—å`ã€`é æœŸå£½å‘½`ã€‚ç›®å‰åŒ¯å…¥/åŒ¯å‡ºè¡Œç‚ºï¼š
    - è‹¥ `ç‰©ç¨®=hamster`ï¼Œæœƒèˆ‡ `data` ä¸­çš„ `hamster.breeds` æ˜ç¢ºåŒæ­¥ï¼ˆå»¶çºŒèˆŠè¡Œç‚ºï¼‰ï¼›
    - è‹¥å°‡ä¾†åœ¨ JSON ä¸­æ–°å¢ `dog` / `cat` / `rabbit` çš„ `breeds` ç¯€é»ï¼Œ`pet_breeds.csv` çš„é …ç›®ä¹Ÿæœƒè¢«åŒ¯å…¥ä¸¦åŒæ­¥åˆ°ç›¸æ‡‰ JSONã€‚

èªªæ˜ï¼šé€™æ¨£çš„è®Šæ›´è®“ CSV ç‚ºå¯æ“´å……çš„å–®ä¸€ä¾†æºï¼ˆ`docs/pet_breeds.csv`ï¼‰ï¼Œä¸¦åŒæ™‚æä¾› per-species çš„ JSON ä¾›å‰ç«¯å°å·¥å…·ç›´æ¥è¼‰å…¥ï¼Œé™ä½å–®ä¸€å¤§å‹ `health-guidelines.json` çš„è¼‰å…¥æˆæœ¬ã€‚

---

## ğŸ“¦ æœ€çµ‚æª”æ¡ˆçµæ§‹

```text
ğŸ“ data
â””â”€â”€ ğŸ“‹ health-guidelines.json

ğŸ“ assets
â”œâ”€â”€ ğŸ“‚ js
â”‚   â”œâ”€â”€ ğŸŸ¨ health-calculator.js
â”‚   â”œâ”€â”€ ğŸŸ¨ health-report-generator.js
â”‚   â””â”€â”€ ğŸŸ¨ health-report-ui.js
â””â”€â”€ ğŸ“‚ images
    â””â”€â”€ ğŸ–¼ï¸ yichai-petshop-logo.png

ğŸŒ health-report.html
```

---

é–‹ç™¼å®Œæˆå¾Œï¼Œè¨˜å¾—åœ¨ `index.html` çš„å°èˆªåˆ—åŠ å…¥æ­¤å·¥å…·çš„é€£çµï¼Œè®“ä½¿ç”¨è€…èƒ½è¼•é¬†æ‰¾åˆ°ï¼
